$(document).ready(function(){function t(){$(".vmenu").hide();$(".overlay").hide()}if($("div.ticket_content").length>0){$("div.ticket_content").live("contextmenu",function(e){if(e.target.nodeName=="A")return true;var t=$("div.vmenu");$('<div class="overlay"></div>').css({left:"0px",top:"0px",position:"absolute",width:"100%",height:"100%",zIndex:"100"}).click(function(){$(this).remove();t.hide()}).mouseover(function(){$(this).remove();t.hide();return false}).appendTo(document.body);$("div.vmenu").css({left:e.pageX,top:e.pageY,zIndex:"101"}).show();return false});$(".vmenu .btn-edit").live("click",function(){t();$(".update-bug-link").trigger("click")});$(".vmenu .btn-close").live("click",function(){t();$("#archived-link").trigger("click")});$(".vmenu .btn-duplicate").live("click",function(){t();$(".duplicate-link").trigger("click")});$(".vmenu .btn-delete").live("click",function(){t();$("#delete_bug_link").trigger("click")})}else if($("#bug-list").length>0){$.jGrowl.defaults.position="bottom-right";$.jGrowl.defaults.life=6e3;var e;$("div.ticket-item").live("contextmenu",function(t){e=$(this)[0].id;var n=$("div.vmenu");$('<div class="overlay"></div>').css({left:"0px",top:"0px",position:"fixed",width:"100%",height:"100%",zIndex:"100"}).click(function(){$(this).remove();n.hide()}).mouseover(function(){$(this).remove();n.hide();return false}).appendTo(document.body);$("div.vmenu").css({left:t.pageX,top:t.pageY,zIndex:"101"}).show();return false});$(".vmenu .btn-edit").live("click",function(){t();$.post("/bug/getBugById/"+e,{YII_CSRF_TOKEN:YII_CSRF_TOKEN},function(e){jQuery("#bugUpdateForm").html(e);jQuery("#updateBugDialog").dialog("open");jQuery(".chzn-select").chosen()},"html");return false});$(".vmenu .btn-close").live("click",function(){t();$.post("/bug/setArchived/"+e,{YII_CSRF_TOKEN:YII_CSRF_TOKEN},function(){if($.fn.yiiListView&&!!$("#bug-list").length){var e=$("input#bugSearch").serialize();$.fn.yiiListView.update("bug-list",{data:e});$.jGrowl("Ticket is closed.")}},"html")});$(".vmenu .btn-duplicate").live("click",function(){t();$.post("/bug/getDuplicateFormByBugId/"+e,{YII_CSRF_TOKEN:YII_CSRF_TOKEN},function(e){jQuery("#bugDuplicateForm").html(e);jQuery("#duplicateBugDialog").dialog("open")},"html");return false});$(".vmenu .btn-delete").live("click",function(){t();if(confirm("Are you sure you want to delete this item?")){$.post("/bug/delete/"+e,{YII_CSRF_TOKEN:YII_CSRF_TOKEN},function(){if($.fn.yiiListView&&!!$("#bug-list").length){var e=$("input#bugSearch").serialize();$.fn.yiiListView.update("bug-list",{data:e});$.jGrowl("Ticket is deleted.")}},"html")}return false})}$(".first_li , .sec_li, .inner_li span").hover(function(){$(this).css({backgroundColor:"#E0EDFE",cursor:"pointer"});if($(this).children().size()>0)$(this).find(".inner_li").show();$(this).css({cursor:"default"})},function(){$(this).css("background-color","#fff");$(this).find(".inner_li").hide()});if($('ul.message .body-comment').length>0){var iCommentID = null;$('ul.message .body-comment').hover(function(){iCommentID = $(this).attr('access_del');if(typeof iCommentID==='undefined'||iCommentID===false){iCommentID = null;}},function(){});$.jGrowl.defaults.position='bottom-right';$.jGrowl.defaults.life=6000;$('ul.message .body-comment.access_del').live('contextmenu',function(e){var $cmenu=$('div.vmenu_dl');$('<div class="overlay"></div>').css({left:'0px',top:'0px',position:'fixed',width:'100%',height:'100%',zIndex:'100'}).click(function(){$(this).remove();$cmenu.hide();}).mouseover(function(){$(this).remove();$cmenu.hide();return false;}).appendTo(document.body);$('div.vmenu_dl').css({ left:e.pageX, top:e.pageY, zIndex:'101' }).show();return false;});$('.vmenu_dl .btn-delete').live('click',function(){if(confirm('Are you sure you want to delete this comment?')){jQuery.ajax({"type":'POST',"url":'/bugkick/bug/DeleteComment/'+iCommentID,"data":{YII_CSRF_TOKEN:YII_CSRF_TOKEN},"cache": false,"success": function(data){obj = jQuery.parseJSON(data);if(obj.status == '200'){$('[access_del="'+iCommentID+'"]').hide(1500);return true;}else{alert(obj.status);};}});}return false;});}});